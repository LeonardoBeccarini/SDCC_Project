<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Agricoltura</title>
    <link rel="stylesheet" href="/static/style.css">
    <meta charset="utf-8"/>
</head>
<body>
<header>
    <h1>Dashboard Monitoraggio Terreno</h1>
</header>

<section class="card">
    <h2>Livelli Umidità</h2>
    <ul>
        {% for s in sensors %}
        <li>
            <strong>{{ s.sensor_id }}</strong>
            : {{ (s.moisture | default('—')) }}%
            {% if s.time %} <span class="muted">({{ s.time }})</span>{% endif %}
        </li>
        {% else %}
        <li>Nessun dato sensori disponibile.</li>
        {% endfor %}
    </ul>
</section>

    <section class="card" id="analytics">
        <h2>Analytics</h2>
        <p>Media (6h): {{ stats.mean }}%</p>
        <p>Massimo (6h): {{ stats.max }}%</p>
        <p>Minimo (6h): {{ stats.min }}%</p>
    </section>

    <section class="card fullwidth" id="log">
        <h2>Irrigazioni recenti</h2>
        <ul>
            {% for ev in irrigations %}
            <li>{{ ev.time }} — sensore {{ ev.sensor_id }}: {{ ev.amount }} mm</li>
            {% endfor %}
        </ul>
    </section>
</main>
</body>
</html>
